# Project: Health Monitor for Elderly People

This project simulates a product designed for elderly people, consisting of a watch (in our case, simulated with a Raspberry Pi) capable of measuring the following parameters:  
- **Heart Rate**  
- **Blood Oxygen (SpO₂)**  
- **Body Temperature**  
- **Ambient Temperature** (collected via an external API)  

The main objective is to provide a means to remotely monitor these health indicators, allowing family members and caregivers to access the information via a web application.

---

## Project Description

The solution is composed of the following elements:

### **Patient Device (Watch/Wearable)**  
This device collects health measurements every 10 seconds and sends them to a server via the MQTT protocol.

### **Server**  
The server receives the measurements from the patient device using the MQTT protocol and stores them in an InfluxDB database. It also processes alerts based on personalized thresholds for each patient, using the stable values set by the doctor when registering the patient’s information.

### **Web Application (Django)**  
Family members can view stored data through a web interface. The application allows viewing daily, weekly, maximum, and minimum information, among others. The data is visually presented using graphs generated by Grafana, which connects directly to the InfluxDB database.

---

## Execution Instructions

Follow the steps below to set up the system:

### **Step 1: Configure Alerts**  
Run the `alerts.py` file, which processes the measurements stored in the InfluxDB database and generates alerts if any metric exceeds the limits set for the patient.

- python alerts.py

### **Step 2: Start the Server**
Run the `subscriber_mqtt_server.py` file, which acts as the MQTT subscriber to receive measurements sent by the patient devices and store them in InfluxDB.

- python subscriber_mqtt_server.py
  
### **Step 3: Run the Client (Patient’s Watch)**
Run the `main.py` file from the client. This script simulates the patient device, collecting measurements every 10 seconds and sending them to the MQTT broker.

- python main.py
  
### **Step 4: Access the Web Application**
Start the Django server for the web application.

- python manage.py runserver

To log in, each family member uses their USERNAME and PASSWORD. For example:
 - USERNAME:  yogi1
 - PASSWORD:  yogi
## Files .py Explanation
### Patient
#### alerts.py:
Waits for alerts (when a measurement exceeds the threshold) to turn on the LED, indicating this situation.
#### led.py:
Contains code to connect an LED to the Raspberry Pi on the specified input, turn it on for a few seconds, and then turn it off (simulating the alert).
#### max30100.py and testMAX30100.py:
Functions to measure heart rate and blood oxygen.
#### heart02Patient.py:
Functions to measure heart rate and blood oxygen (using function from the ones above).
#### temperaturePatient.py: 
Functions to measure the patient’s body temperature using a barometer.
#### temperatureAmbient.py:
Calls an API to retrieve ambient temperature based on the location's coordinates. The university's coordinates are set by default.
### Server
#### load_influx.py:
Methods to insert measurements into the InfluxDB bucket for data storage.
#### subscriber_mqtt_server.py:
Handles receiving measurements from the Raspberry Pi and storing them in InfluxDB. It also compares received measurements against the patient’s stable values (stored in a separate database, not InfluxDB) to determine if an alert should be triggered. If so, it sends an alarm to the Raspberry Pi to activate the LED.
### Django
Contains the web application for registration and visualizing the patient’s data.

## System Requirements
- Python 3.x
- Django
- InfluxDB
- Grafana


